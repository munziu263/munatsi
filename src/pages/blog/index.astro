---
import { getCollection } from "astro:content";
import Container from "~/components/container.astro";
import Layout from "~/layouts/Layout.astro";
import Card from "~/components/card.astro";

const blogPosts = await getCollection("blog", ({ data }) => {
  return !data.draft && data.date < new Date();
});

const sortedPosts = blogPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout>
  <Container>
    <div class="py-16 md:py-24">
      <div class="mb-12">
        <h1 class="font-bold tracking-tight text-4xl md:text-5xl mb-4 text-default">
          Blog
        </h1>
        <p class="text-base text-offset max-w-2xl">
          Thoughts on development, technology, and building useful tools.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {sortedPosts.map((post) => (
          <Card
            title={post.data.title}
            href={`/blog/${post.slug}`}
            image={post.data.image}
            description={post.data.description}
            date={post.data.date.toDateString()}
          />
        ))}
      </div>
    </div>
  </Container>
</Layout>
